#:kivy 1.0.9

<Ball>:
    size: 50, 50 
    canvas:
        Color:
            rgba: (self.ballR/255, self.ballG/255, self.ballB/255, 1)
        Ellipse:
            pos: self.pos 
            size: self.size

<Paddle>:
    size: 200, 25
    canvas:
        Color:
            rgba: (self.paddleR/255, self.paddleG/255, self.paddleB/255, 1)
        Rectangle:
            pos: self.pos
            size: self.size

<Game>:
    canvas.before:
        Rectangle:
            size: self.size
            pos: self.pos
            source: "sky.png"
        Rectangle:
            size: self.width, 138
            pos: self.pos[0], self.pos[1] + self.height - 138
            texture: self.cloud_texture
        Rectangle:
            size: self.width, 254
            pos: self.pos[0] + 20, self.pos[1] + self.height - 300
            texture: self.sun_texture

    # canvas to activate at timer intervals. increase opacity as timer gets lower to make screen redder
    canvas:
        Color:
            rgba: (255,0,0,self.canvasOpacity)
        Rectangle:
            size: self.size
            pos: self.pos

    ball: bb_ball
    player1: bb_player
    
    Ball:
        id: bb_ball
        center: self.parent.center
        
    Paddle:
        id: bb_player
        y: root.y + 100
        center_x: root.center_x

    Label:
        font_size: 70  
        center_x: root.center_x
        top: root.top - self.height
        text: "{:.1f}".format(root.player1.timer)

<Control>:
    canvas:
        Color:
            rgba: (37/255, 150/255, 190/255, 1)
        Rectangle:
            size: self.size
            pos: self.pos

    player1: bb_player

    Paddle:
        id: bb_player
        y: root.y + 100
        center_x: root.center_x

    Label:
        font_size: 70  
        center_x: root.center_x
        top: root.top - self.height
        text: "Controls"

    Label:
        font_size: 50  
        center_x: root.center_x
        center_y: root.center_y + self.height
        text: 'Touch the screen to move the paddle\nTouch the paddle to change paddle colors'

    Label:
        font_size: 80  
        center_x: root.center_x - self.height/2
        center_y: root.center_y - self.height/2
        text: '[b]Try it out![/b]'
        markup: True

<About>:
    canvas:
        Color:
            rgba: (37/255, 150/255, 190/255, 1)
        Rectangle:
            size: self.size
            pos: self.pos

    Label:
        font_size: 70  
        center_x: root.center_x
        top: root.top - self.height
        text: "About"

<ElectroMagneticSpectrum>:
    canvas:
        Color:
            rgba: (37/255, 150/255, 190/255, 1)
        Rectangle:
            size: self.size
            pos: self.pos

    Label:
        font_size: 40  
        center_x: root.center_x - self.width/3
        top: root.top - self.height
        text: "EM-Spectrum"

    #:import gi gameinfo
    Label:
        size_hint_y: None
        text_size: self.width, None
        height: self.texture_size[1]
        width: root.width/1.1
        text: gi.emText
        pos: (root.center_x - self.width/2, root.center_y - self.height/1.5)
        font_size: 40

<Sun>:
    canvas:
        Color:
            rgba: (37/255, 150/255, 190/255, 1)
        Rectangle:
            size: self.size
            pos: self.pos

    Label:
        font_size: 60  
        center_x: root.center_x
        top: root.top - self.height
        text: "Sun"

    #:import gi gameinfo
    Label:
        size_hint_y: None
        text_size: self.width, None
        height: self.texture_size[1]
        width: root.width/1.1
        text: gi.sunText
        pos: (root.center_x - self.width/2, root.center_y - self.height/1.5)
        font_size: 40

<Albedo>:
    canvas:
        Color:
            rgba: (37/255, 150/255, 190/255, 1)
        Rectangle:
            size: self.size
            pos: self.pos

    Label:
        font_size: 60  
        center_x: root.center_x
        top: root.top - self.height
        text: "Albedo"

    #:import gi gameinfo
    Label:
        size_hint_y: None
        text_size: self.width, None
        height: self.texture_size[1]
        width: root.width/1.1
        text: gi.albedoText
        pos: (root.center_x - self.width/2, root.center_y - self.height/1.5)
        font_size: 40

<Colors>:
    canvas:
        Color:
            rgba: (37/255, 150/255, 190/255, 1)
        Rectangle:
            size: self.size
            pos: self.pos

    Label:
        font_size: 60  
        center_x: root.center_x
        top: root.top - self.height
        text: "Colors"

    #:import gi gameinfo
    Label:
        size_hint_y: None
        text_size: self.width, None
        height: self.texture_size[1]
        width: root.width/1.1
        text: gi.colorsText
        pos: (root.center_x - self.width/2, root.center_y - self.height/1.5)
        font_size: 40

<Gasses>:
    canvas:
        Color:
            rgba: (37/255, 150/255, 190/255, 1)
        Rectangle:
            size: self.size
            pos: self.pos

    Label:
        font_size: 60  
        center_x: root.center_x
        top: root.top - self.height
        text: "Gasses"

    #:import gi gameinfo
    Label:
        size_hint_y: None
        text_size: self.width, None
        height: self.texture_size[1]
        width: root.width/1.1
        text: gi.gassesText
        pos: (root.center_x - self.width/2, root.center_y - self.height/1.5)
        font_size: 40 

<Manager>:
    id: screen_manager

    Screen:
        name: 'home'
        canvas.after:
            Color:
                rgba: (37/255, 150/255, 190/255, 0.3)
            Rectangle:
                size: self.size
                pos: self.pos
        canvas:
            Rectangle:
                size: self.size
                pos: self.pos
                source: "menu.png"
        Button:
            text: 'Play Albreakdo!'
            size_hint: (.4, .2)
            pos: (root.center_x - self.width/2, root.center_y + self.height)
            font_size: 50
            on_release: root.current = 'game';game.play()
        Button:
            text: 'Controls'
            size_hint: (.4, .2)
            pos: (root.center_x - self.width/2, root.center_y - self.height/2)
            font_size: 50
            on_release: root.current = 'control'
        Button:
            text: 'About'
            size_hint: (.4, .2)
            pos: (root.center_x - self.width/2, root.center_y - self.height * 2)
            font_size: 50
            on_release: root.current = 'about'

    Screen:
        name: 'game'
        Game:
            id: game

    Screen:
        name: 'control'
        Control:
            id: control
        Button:
            text: 'Back to Main Menu'
            rgba: (37/255, 150/255, 190/255, 0.5)
            background_color: (37/255, 150/255, 190/255, 0.7)
            size_hint: (.3, .15)
            pos: (root.center_x + self.width/2, root.center_y + self.height * 2)
            font_size: 40
            on_release: root.current = 'home'

    Screen:
        name: 'about'
        About:
            id: about
        Button:
            text: 'Back to Main Menu'
            rgba: (37/255, 150/255, 190/255, 0.5)
            background_color: (37/255, 150/255, 190/255, 0.7)
            size_hint: (.3, .15)
            pos: (root.center_x + self.width/2, root.center_y + self.height * 2)
            font_size: 40
            on_release: root.current = 'home'
        Button:
            text: 'Electromagnetic Spectrum'
            size_hint: (.4, .1)
            pos: (root.center_x - self.width/2, root.center_y + self.height)
            font_size: 30
            on_release: root.current = 'em'
        Button:
            text: 'Sun'
            size_hint: (.4, .1)
            pos: (root.center_x - self.width/2, root.center_y)
            font_size: 30
            on_release: root.current = 'sun'
        Button:
            text: 'Albedo'
            size_hint: (.4, .1)
            pos: (root.center_x - self.width/2, root.center_y - self.height)
            font_size: 30
            on_release: root.current = 'albedo'
        Button:
            text: 'Colors'
            size_hint: (.4, .1)
            pos: (root.center_x - self.width/2, root.center_y - self.height * 2)
            font_size: 30
            on_release: root.current = 'colors'
        Button:
            text: 'Gasses'
            size_hint: (.4, .1)
            pos: (root.center_x - self.width/2, root.center_y - self.height * 3)
            font_size: 30
            on_release: root.current = 'gasses'

    Screen:
        name: 'em'
        ElectroMagneticSpectrum:
            id: em
        AnchorLayout:
            anchor_x: 'right'
            anchor_y: 'top'
            AboutButton:
    Screen:
        name: 'sun'
        Sun:
            id: sun
        AnchorLayout:
            anchor_x: 'right'
            anchor_y: 'top'
            AboutButton:
    Screen:
        name: 'albedo'
        Albedo:
            id: albedo
        AnchorLayout:
            anchor_x: 'right'
            anchor_y: 'top'
            AboutButton:
    Screen:
        name: 'colors'
        Colors:
            id: colors
        AnchorLayout:
            anchor_x: 'right'
            anchor_y: 'top'
            AboutButton:
    Screen:
        name: 'gasses'
        Gasses:
            id: gasses
        AnchorLayout:
            anchor_x: 'right'
            anchor_y: 'top'
            AboutButton:



 