#:kivy 1.0.9

<Ball>:
    size: 50, 50 
    canvas:
        Color:
            rgba: (self.ballR, self.ballG, self.ballB, 1)
        Ellipse:
            pos: self.pos 
            size: self.size

<Paddle>:
    size: 200, 25
    canvas:
        Color:
            rgba: (self.paddleR, self.paddleG, self.paddleB, 1)
        Rectangle:
            pos: self.pos
            size: self.size

<Game>:
    canvas.before:
        Rectangle:
            size: self.size
            pos: self.pos
            source: "sky.png"
        Rectangle:
            size: self.width, 138
            pos: self.pos[0], self.pos[1] + self.height - 138
            texture: self.cloud_texture
        Rectangle:
            size: self.width, 254
            pos: self.pos[0] + 20, self.pos[1] + self.height - 300
            texture: self.sun_texture

    # canvas to activate at timer intervals. increase opacity as timer gets lower to make screen redder
    canvas:
        Color:
            rgba: (255,0,0,self.canvasOpacity)
        Rectangle:
            size: self.size
            pos: self.pos

    ball: bb_ball
    player1: bb_player
    
    Ball:
        id: bb_ball
        center: self.parent.center
        
    Paddle:
        id: bb_player
        y: root.y + 100
        center_x: root.center_x

    Label:
        font_size: 70  
        center_x: root.center_x
        top: root.top - 100
        text: "{:.1f}".format(root.player1.timer)

<Manager>:
    id: screen_manager

    Screen:
        name: 'home'
        Button:
            text: 'Play Albreakdo!'
            halign: 'center'
            valign: 'middle'
            font_size: 100
            text_size: self.size
            on_release: root.current = 'game';game.serve_ball()

    Screen:
        name: 'game'
        Game:
            id: game

 